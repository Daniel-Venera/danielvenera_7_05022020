<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title id="title">{{title}}</title>
        <link rel="stylesheet" href="https://pro.fontawesome.com/releases/v5.10.0/css/all.css" integrity="sha384-AYmEC3Yw5cVb3ZcuHtOA93w35dYTsvhLPVnYs9eStHfGJvOvKxVfELGroGkvsg+p" crossorigin="anonymous" />
    </head>
    <body>
        <header>
            <nav>
                <a href="index.html"><i class="fas fa-arrow-left"></i> <span> Retour à la home</span></a>
                <div>
                    <a href="createpost.html">Créer un article</a>
                </div>
                <div id="userId">
                    <a :href="`user.html?id=${userId}`">Mon compte</a>
                </div>
                <button id="logOut">Déconnexion</button>
                <div id="admin" v-if="admin">
                    <a href="admin.html" id="admin">Espace Admin</a>
                </div>
            </nav>
        </header>
        <div id="root">
            <span v-if="updateMessage">{{updateMessage}}</span>
            <form v-if="isCurrentUser" @submit.prevent="update">
                <input type="text" v-model="firstName" placeholder="Prénom" />
                <input type="text" v-model="lastName" placeholder="Nom" />
                <input type="text" v-model="job" placeholder="Poste" />
                <input type="email" v-model="email" placeholder="Email" />
                <input type="password" v-model="password" placeholder="mot de passe" />
                <button type="submit" :disabled="firstName.length < 1 || lastName.length < 1 || job.length < 1 || email.length < 1 || password.length < 1 ">Mettre à jour</button>
            </form>
            <div v-else>
                Prénom : {{firstName}} <br />
                Nom : {{lastName}} <br />
                Poste : {{job}} <br />
                Email : {{email}} <br />
            </div>
            <button v-if="isCurrentUser || currentUserId == 1" @click="deleteUser">Supprimer le compte</button>
            <button v-if="!isUserValidate" @click="validateUser">Valider le compte</button>
            <h2>Articles</h2>
            <ul v-if="userPosts.length > 0">
                <li v-for="userPost in userPosts">
                    <a :href="`post.html?id=${userPost.post_id}`">{{userPost.post_title}}</a>
                </li>
            </ul>
            <span v-else>Aucun article</span>
            <h2>Commentaires</h2>
            <ul v-if="userComments.length > 0">
                <li v-for="userComment in userComments">
                    {{userComment.comment_content}} dans
                    <a :href="`post.html?id=${userComment.post_id}`">cet article</a>
                </li>
            </ul>
            <span v-else>Aucun commentaire</span>
        </div>
        <script src="https://cdn.jsdelivr.net/npm/vue"></script>
        <script src="user.js"></script>
        <script src="main.js"></script>
    </body>
</html>
